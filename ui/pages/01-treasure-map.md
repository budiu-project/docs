# 寻宝地图

## 用途

主页面，用户遛狗时发现并开启宝箱的核心交互界面。属于底部 Tab 栏"寻宝"入口。全屏地图上展示附近宝箱，用户进入 50m 范围后手动开箱获取奖励。

## 导航

- **来源：** 底部 Tab 栏"寻宝"
- **去向：** 我的积分（点击顶部状态栏积分区域）、我的券包（点击顶部状态栏券包图标）、券详情（从商家券奖励卡片"查看详情"）

## 元素

### 顶部状态栏（浮层）
- 安全区下方，左右 16px，高 44px
- 毛玻璃效果（白色 80%，backdrop-blur 12px），圆角 12px，阴影
- 左：金币图标 + "今日 +{n} 分"
- 中："3/10" 宝箱进度
- 右：券包图标 🎫 + 红点提示

### 提示条（条件触发）
- 紧贴状态栏下方，36px 高，圆角 8px
- 三种类型：警告（GPS 弱 #FFF3CD）、错误（网络异常 #F8D7DA）、信息（宝箱被抢 #D1ECF1）
- 信息类 3 秒自动消失，其他持续到状态恢复

### 地图区域
- 全屏，高德地图 SDK
- 默认以用户位置为中心，500m 半径
- 用户位置标记：40×40 蓝色圆 + 🐕 + 脉冲环

### 宝箱标记（7 种状态）
- 积分宝箱常态：📦 36×36，下方距离标注
- 积分宝箱可开启：📦 40×40，弹跳动画 + 发亮，"可开启"绿色标注
- 积分宝箱变灰：36×36，灰度 50% 不透明度
- 商家宝箱常态：🎁 44×44
- 商家宝箱可开启：🎁 48×48，弹跳 + 发亮
- 商家宝箱已领取：🎁 44×44，灰度 + 绿色勾
- 稀有宝箱：对应类型图标 + 紫色光环脉冲（1.5s 周期）

### 筛选按钮
- 左下角胶囊，36px 高，"⚙️ 筛选"
- 展开下拉：全部 / 积分宝箱 / 商家宝箱

### 定位按钮
- 右下角 44×44 圆形，📍

### 开箱动画
- 0.8s 开盖动画 + 金色光效
- 稀有宝箱额外粒子特效

### 积分奖励卡片（Bottom Sheet）
- 底部滑出，屏幕 1/4 高度
- 金币图标 48×48 + "+{n} 积分" 32px 金色 + 总积分提示

### 商家券奖励卡片（Bottom Sheet）
- 底部滑出，屏幕 1/3 高度
- 商家 logo + 名称 + 券面信息 24px 红色 + 有效期 + 额外积分标签
- "查看详情"主按钮 + "关闭"文字按钮

### 底部 Tab 栏
- 56px 高 + 安全区
- 4 个 Tab：🏠首页、📦寻宝（选中）、🗺️轨迹、👤我的

## 状态

- **默认：** 地图加载完成，显示附近宝箱
- **加载中：** 地图加载骨架屏，宝箱延迟出现（依次蹦出动画）
- **空状态：** 1km 内无宝箱 → 居中插画 + "附近暂无宝箱，换个地方遛遛看"
- **错误 — GPS 弱：** 提示条持续显示 "GPS 信号弱，请移至空旷处"
- **错误 — 网络异常：** 提示条持续显示 + "重试"按钮
- **错误 — 定位未授权：** 全屏引导页，插画 + "寻宝需要定位权限" + "去设置"按钮
- **城市未开放：** 居中插画 + "当前区域暂未开放寻宝，敬请期待"

## 设计风格

全屏地图为主体，所有 UI 元素以毛玻璃浮层覆盖其上，营造沉浸式探索感。宝箱通过弹跳、发光、粒子等微动画传递"可交互"和"奖励"的反馈。整体克制，不喧宾夺主于地图本身。
