# 开始寻宝按钮交互设计

## 概述

在寻宝地图中央新增"开始寻宝"大按钮，替代原任务条的"未开始"状态。按钮带项圈色光环脉冲，点击后原地展开为毛玻璃任务摘要卡片，用户确认后点"出发"开始今日任务。任务卡片（Bottom Sheet）缩小为浮动卡片风格。

## 开始寻宝按钮（今日任务未开始时显示）

### 外观
- 地图正中央，圆形，直径 80px
- 项圈色渐变背景（collar-lt → collar）
- 白色 🐾 图标 32px 居中
- 下方文字"开始寻宝" 13px 白色加粗，间距 8px
- 外圈项圈色光环脉冲（opacity 50%→100%，1.5s 循环），宽 3px，距边缘 6px
- 阴影：0 4px 20px collar-glow

### 微动效
- 入场：scale(0) 弹出（0.5s spring），光环 0.3s delay 渐入
- idle：光环持续脉冲 + 按钮上下浮动（translateY ±3px，3s 循环）
- 按下：scale(0.92)，光环暂停

### 显示条件
- 今日任务未开始时显示
- 任务进行中或已完成时不显示

## 按钮展开为任务摘要卡片

### 动画序列（~0.6s）
1. 缩放反馈 scale(0.92) → 回弹（0.15s）
2. 光环向外扩散并淡出（0.3s）
3. 圆形（80px）变形为圆角矩形（屏幕 75% 宽，圆角 20px）（0.4s ease-out）
4. 背景从项圈色渐变过渡为毛玻璃（白 85% + backdrop-blur 16px）（0.3s，与变形并行）
5. 内容淡入（opacity + translateY，0.25s，delay 0.35s）

### 卡片内容
- 标题行：🐾 "今日寻宝任务" 15px 加粗 + 右侧 "0/3" 项圈色
- 3 个任务摘要行（每行 ~36px）：
  - 圆形小图标（12px，项圈色描边，空心）
  - 任务名 14px #333
  - 奖励 13px #999
  - 行间 0.5px 分割线
- "出发"按钮：项圈色渐变，白字 15px 加粗，40px 高，圆角 20px，全宽

### 卡片定位
- 地图垂直居中，水平居中
- 无遮罩（毛玻璃已区分层级）
- 点击外区域关闭（反向收缩回按钮）

## 点击"出发"后收起

### 动画序列（~0.5s）
1. 出发按钮 scale(0.95)（0.1s）
2. 内容淡出（0.15s）
3. 矩形收缩为圆形（0.35s ease-in）
4. 圆形缩小至 scale(0) 消失（0.2s，与收缩尾端并行）
5. 任务条从底部滑入"进行中"状态（0.3s，delay 0.2s）

### 状态切换
- 开始寻宝按钮消失，本次会话不再出现
- 任务条："🐾 0/3 进行中  最近: 东北230m"
- Toast："🐾 寻宝任务已开始！"
- 宝箱标记播放入场弹跳动画

### 关闭卡片（不出发）
- 点击外区域 → 反向收缩回按钮（0.4s）→ 恢复 idle 状态
- 动画中禁止重复点击

### 低端机降级
- 跳过变形动画，圆形按钮淡出 → 卡片淡入（0.3s）

## 任务条调整

- 删除"未开始"状态 — 由开始寻宝按钮接管
- 仅在任务开始后出现，两种状态：
  - 进行中："🐾 1/3 进行中  最近: 东北230m"
  - 全部完成："🎯 任务完成！领取奖励宝箱"（项圈色光环脉冲）
- 入场：从底部滑入，衔接出发收起动画

## 任务卡片（Bottom Sheet）缩小

- 宽度：左右 24px 边距（约屏幕 85%），水平居中
- 四边圆角 16px（不再底部贴边）
- 底部距 Tab 栏 12px
- 遮罩保留 rgba(0,0,0,0.3)
- 不再需要"出发"按钮（任务已在进行中）
- 保留：标题 + 进度、3 个任务项、关闭方式不变
